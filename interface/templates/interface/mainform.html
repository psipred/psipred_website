{% load ractive_tags %}
{% load static %}
{% load bootstrap3 %}
<br />

<form name="main_form" id="main_form" method="Post" class="form" intro="slide" outro="slide" on-submit="submit">
{% csrf_token %}
{% templatetag openvariable %}#if sequence_form_visible === 1 {% templatetag closevariable %}
<div class="form-group">
  <tr><td colspan="2"><h4>Popular Analyses</h4></td></tr>
    <table class="full-width-table">
{% for field in form %}
    {% if "PSIPRED 4.0" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;<a  data-toggle="tool-tip"
        title="Predict helices, beta sheets and coils from AA sequence." >{{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "DISOPRED3" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;<a  data-toggle="tool-tip"
        title="Detect intrinsically disordered regions in proteins" >{{ field.label_tag }}</a>
        </td>
        </tr>
    {% endif %}
    {% if "MEMSAT-SVM" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;<a   data-toggle="tool-tip"
        title="Calculates most probable length, location and topological orientation for each transmembrane segment" >{{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "pGenTHREADER" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a   data-toggle="tool-tip"
        title="Quickly predict protein fold structures by comparison with protein templates of known structure. Suitable for full proteome annotations" >{{ field.label_tag }}</a>
        </td>
        </tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td colspan="2"><h4>Contact Analysis</h4></td></tr>
    {% endif %}
    {% if "DeepMetaPSICOV" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a   data-toggle="tool-tip"
        title="Predict interresidue contacts using deep fully convolutional residual neural network">
        {{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "MEMPACK" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a   data-toggle="tool-tip"
        title="Predict packing of helices in the membrane.">
        {{ field.label_tag }}</a>
        </td>
        </tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Fold Recognition</h4></td><td></td></tr>
    {% endif %}
    {% if "GenTHREADER (Rapid Fold Recognition)" == field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a   data-toggle="tool-tip"
        title="Fast fold recognition method, suitable for structural annotation of very distant sequences. For application to whole, translated genomic sequences see downloads.">
        {{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "pDomTHREADER" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a   data-toggle="tool-tip"
        title = "More accurate alignments to better predict domain boundaries. Tuned for performance in fine superfamily discrimination">
        {{ field.label_tag }}</a>
        </td>
        </tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Structure Modelling</h4></td><td></td></tr>
    {% endif %}
    {% if "Bioserf 2.0" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "Fully automated homology modelling server - Modeller Key required">
        {{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "Domserf 2.1" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "structural domain modelling protocol">
        {{ field.label_tag }}</a>
        </td>
        </tr>
    {% endif %}
    {% if "DMPfold" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "Builds models based on predicted inter-atomic distance bounds, the main chain hydrogen bond network, and torsion angles.">
        {{ field.label_tag }}</a>
        </td>
        <td></td></tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Domain Prediction</h4></td><td></td></tr>
    {% endif %}
    {% if "DomPred" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "Predicts protein structural domain boundaries.">
        {{ field.label_tag }}</a>
        </td>
        <td></td></tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Function Prediction</h4></td><td></td></tr>
    {% endif %}
    {% if "FFPred 3" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "Predicts protein function, using Gene Ontology annotations">
        {{ field.label_tag }}</a>
        </td>
        <td></td></tr>
    {% endif %}
{% endfor %}
    <tr><td colspan=2><a class="form-link" href="http://bioinf.cs.ucl.ac.uk/index.php?id=5399">Help...</a><br /></td></tr>
    </table>
</div>
<div class="col-sm-12 form-header">
  <div class='row form-header-row'>
    <h5 class="float-header">Submission details</h5>
  </div>
</div>

<br />
<br />
<p class="form_error">{% ractivehtmltag "form_error" %}</p>
{% for field in form %}
    {% if "PSIPRED" in field.label or "DISOPRED" in field.label or "MEMSAT-SVM" in field.label or "pGenTHREADER" in field.label or "MetaPSICOV" in field.label or "Generate TDB" in field.label or "MEMEMBED" in field.label or "HSPred" in field.label or "Metsite" in field.label or "MetaPSICOV" in field.label or "FFPred 3" in field.label or "Domserf 2.1" in field.label or "Bioserf 2.0" in field.label or "pDomTHREADER" in field.label or "DomPred" in field.label or "GenTHREADER (Rapid Fold Recognition)" == field.label or "MEMPACK" in field.label or "Metsite" in field.label or "HSPred" in field.label or "MEMEMBED" in field.label or "Generate TDB" in field.label or 'DeepMetaPSICOV' in field.label or 'DMPfold' in field.label %}
    {% elif "Protein Sequence" in field.label %}
      <div class="form-group">
        {% bootstrap_field field %}
      </div>
    <a class="form-link" href="http://bioinf.cs.ucl.ac.uk/index.php?id=5399">Help...</a><br />
    If you wish to test these services follow this link to retrieve <a class="form-link" href="http://www.uniprot.org/uniprot/B0R5N9.fasta">a test fasta sequence</a>.<br /><br />
    {% else %}
    <div class="form-group">
      {% bootstrap_field field %}
    </div>
    {% endif %}
{% endfor %}
{% templatetag openvariable %}/if{% templatetag closevariable %}

{% templatetag openvariable %}#if structure_form_visible === 1 {% templatetag closevariable %}
<div class="form-group">
    <table class="full-width-table">
{% for field in form %}
    {% if "Metsite" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "">
        {{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "HSPred" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "Predicts hotspot residues">
        {{ field.label_tag }}</a>
        </td>
        </tr>
    {% endif %}
    {% if "MEMEMBED" in field.label %}
        <tr>
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "Quickly and accurately orientates both alpha-helical and beta-barrel membrane proteins within the lipid bilayer">
        {{ field.label_tag }}</a>
        </td>
    {% endif %}
    {% if "Generate TDB" in field.label %}
        <td>
        {{ field.errors }}
        {{ field }}&nbsp;
        <a data-toggle="tool-tip"
        title = "">
        {{ field.label_tag }}</a>
        </td>
        </tr>
    {% endif %}
{% endfor %}
    <tr><td colspan=2><a class="form-link" href="http://bioinf.cs.ucl.ac.uk/index.php?id=5399">Help...</a><br /></td></tr>
    </table>
</div>
<div class="col-sm-12 form-header-structure">
  <div class='row form-header-row'>
    <h5 class="float-header">Submission details</h5>
  </div>
</div>
<p class="form_error">{% ractivehtmltag "form_error" %}</p>

<br /><br /><br />
Select PDB file<br />
<input type=file  name="pdbFile" id="pdbFile" /><br /><br />
<a class="form-link" href="http://bioinf.cs.ucl.ac.uk/index.php?id=5399">Help...</a><br />
If you wish to Metsite or HSPred follow this link to retrieve <a class="form-link" href="http://www.rcsb.org/pdb/download/downloadFile.do?fileFormat=pdb&compression=NO&structureId=1IAR">a test pdb file.</a><br /><br />
{% for field in form %}
    {% if "PSIPRED" in field.label or "DISOPRED" in field.label or "MEMSAT-SVM" in field.label or "pGenTHREADER" in field.label or "MetaPSICOV" in field.label or "Generate TDB" in field.label or "MEMEMBED" in field.label or "HSPred" in field.label or "Metsite" in field.label or "MetaPSICOV" in field.label or "FFPred 3" in field.label or "Domserf 2.1" in field.label or "Bioserf 2.0" in field.label or "pDomTHREADER" in field.label or "DomPred" in field.label or "GenTHREADER (Rapid Fold Recognition)" == field.label or "MEMPACK" in field.label or "Metsite" in field.label or "HSPred" in field.label or "MEMEMBED" in field.label or "Generate TDB" in field.label or 'Protein Sequence' in field.label or 'DMPfold' in field.label or 'DeepMetaPSICOV' in label %}
    {% else %}
    <div class="form-group">
      {% bootstrap_field field %}
    </div>
      {% endif %}
{% endfor %}

{% templatetag openvariable %}/if{% templatetag closevariable %}

{% if suspend %}
    <h2 style="color: red;">{{ suspend_message }}</h2>
{% else %}

    {% buttons %}
         <input class="btn btn-danger" type="reset" value="Reset" />
         <input value="Submit" type="submit" class="btn btn-primary" />
    {% endbuttons %}
{% endif %}
</form>
