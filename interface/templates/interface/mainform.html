{% load ractive_tags %}
{% load static %}
{% load bootstrap3 %}
<br />

<form name="main_form" id="main_form" method="Post" class="form" intro="slide" outro="slide" on-submit="submit">
{% csrf_token %}
{% templatetag openvariable %}#if sequence_form_visible === 1 {% templatetag closevariable %}
<div class="form-group">
  <tr><td colspan="2"><h4>Popular Analyses</h4></td></tr>
    <table class="full-width-table">
{% for field in form %}
    {% if "PSIPRED 4.0" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title="Predict helices, beta sheets and coils from AA sequence" >
        {{ field.errors }}
        {{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "DISOPRED3" in field.label %}
        <td data-toggle="tool-tip"
        title="Detect intrinsically disordered regions in proteins" >
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
    {% endif %}
    {% if "MEMSAT-SVM" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title="Calculate length, location and topology of transmembrane helices">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "pGenTHREADER" in field.label %}
        <td data-toggle="tool-tip"
        title="Protein fold recognition with protein templates of known structure.">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td colspan="2"><h4>Contact Analysis</h4></td></tr>
    {% endif %}
    {% if "DeepMetaPSICOV" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title="Predict interresidue contacts using a convolutional neural network">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "MEMPACK" in field.label %}
        <td data-toggle="tool-tip"
        title="Predict packing membrane helices">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Fold Recognition</h4></td><td></td></tr>
    {% endif %}
    {% if "GenTHREADER (Rapid Fold Recognition)" == field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title="Fast fold recognition method using template structures">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "pDomTHREADER" in field.label %}
        <td data-toggle="tool-tip"
        title = "Fast protein domain fold recognition using domain templates">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Structure Modelling</h4></td><td></td></tr>
    {% endif %}
    {% if "Bioserf 2.0" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Fully automated homology modelling">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "Domserf 2.1" in field.label %}
        <td data-toggle="tool-tip"
        title = "Fully automated structural domain homology modelling">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
    {% endif %}
    {% if "DMPfold" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Accurate structure prediction using residue-residue contacts.">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        <td></td></tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Single Sequence Prediction</h4></td><td></td></tr>
    {% endif %}
    {% if "S4Pred" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Single Sequence Secondary Structure Prediction.">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        <td></td></tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Domain Prediction</h4></td><td></td></tr>
    {% endif %}
    {% if "DomPred" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Predict protein structural domain boundaries.">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        <td></td></tr>
        <tr><td colspan="2" class="input_table"><hr></td></tr>
        <tr><td><h4>Function Prediction</h4></td><td></td></tr>
    {% endif %}
    {% if "FFPred 3" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Predict protein function, using Gene Ontology annotations">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        <td></td></tr>
    {% endif %}
{% endfor %}
    <tr><td colspan=2><a class="form-link" href="http://bioinfadmin.cs.ucl.ac.uk/UCL-CS_Bioinformatics_Server_Tutorial.html">Help...</a><br /></td></tr>
    </table>
</div>
<div class="col-sm-12 form-header">
  <div class='row form-header-row'>
    <h5 class="float-header">Submission details</h5>
  </div>
</div>

<br />
<br />
<p class="form_error">{% ractivehtmltag "form_error" %}</p>
{% for field in form %}
    {% if "PSIPRED" in field.label or "DISOPRED" in field.label or "MEMSAT-SVM" in field.label or "pGenTHREADER" in field.label or "MetaPSICOV" in field.label or "Generate TDB" in field.label or "MEMEMBED" in field.label or "HSPred" in field.label or "Metsite" in field.label or "MetaPSICOV" in field.label or "FFPred 3" in field.label or "Domserf 2.1" in field.label or "Bioserf 2.0" in field.label or "pDomTHREADER" in field.label or "DomPred" in field.label or "GenTHREADER (Rapid Fold Recognition)" == field.label or "MEMPACK" in field.label or "Metsite" in field.label or "HSPred" in field.label or "MEMEMBED" in field.label or "Generate TDB" in field.label or 'DeepMetaPSICOV' in field.label or 'DMPfold' in field.label or 'S4Pred' in field.label%}
    {% elif "Protein Sequence" in field.label %}
      <div class="form-group">
        {% bootstrap_field field %}
      </div>
    <a class="form-link" href="http://bioinfadmin.cs.ucl.ac.uk/UCL-CS_Bioinformatics_Server_Tutorial.html">Help...</a><br />
    If you wish to test these services follow this link to retrieve <a class="form-link" href="http://www.uniprot.org/uniprot/B0R5N9.fasta">a test fasta sequence</a>.<br /><br />
    {% else %}
    <div class="form-group">
      {% bootstrap_field field %}
    </div>
    {% endif %}
{% endfor %}
{% templatetag openvariable %}/if{% templatetag closevariable %}

{% templatetag openvariable %}#if structure_form_visible === 1 {% templatetag closevariable %}
<div class="form-group">
    <table class="full-width-table">
{% for field in form %}
    {% if "Metsite" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Detects metal-binding residues from protein structure">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "HSPred" in field.label %}
        <td data-toggle="tool-tip"
        title = "Predicts protein-protein interaction hotspot residues">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
    {% endif %}
    {% if "MEMEMBED" in field.label %}
        <tr>
        <td data-toggle="tool-tip"
        title = "Orientate membrane proteins within the lipid bilayer">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
    {% endif %}
    {% if "Generate TDB" in field.label %}
        <td data-toggle="tool-tip"
        title = "Generate TDB file from structure for use with genTHREADER, pGenTHREADER and pDomTHREADER">
        {{ field.errors }}{{ field }}&nbsp;{{ field.label_tag }}
        </td>
        </tr>
    {% endif %}
{% endfor %}
    <tr><td colspan=2><a class="form-link" href="http://bioinfadmin.cs.ucl.ac.uk/UCL-CS_Bioinformatics_Server_Tutorial.html">Help...</a><br /></td></tr>
    </table>
</div>
<div class="col-sm-12 form-header-structure">
  <div class='row form-header-row'>
    <h5 class="float-header">Submission details</h5>
  </div>
</div>
<p class="form_error">{% ractivehtmltag "form_error" %}</p>

<br /><br /><br />
Select PDB file<br />
<input type=file  name="pdbFile" id="pdbFile" /><br /><br />
<a class="form-link" href="http://bioinfadmin.cs.ucl.ac.uk/UCL-CS_Bioinformatics_Server_Tutorial.html">Help...</a><br />
If you wish to Metsite or HSPred follow this link to retrieve <a class="form-link" href="http://www.rcsb.org/pdb/download/downloadFile.do?fileFormat=pdb&compression=NO&structureId=1IAR">a test pdb file.</a><br /><br />
{% for field in form %}
    {% if "PSIPRED" in field.label or "DISOPRED" in field.label or "MEMSAT-SVM" in field.label or "pGenTHREADER" in field.label or "MetaPSICOV" in field.label or "Generate TDB" in field.label or "MEMEMBED" in field.label or "HSPred" in field.label or "Metsite" in field.label or "MetaPSICOV" in field.label or "FFPred 3" in field.label or "Domserf 2.1" in field.label or "Bioserf 2.0" in field.label or "pDomTHREADER" in field.label or "DomPred" in field.label or "GenTHREADER (Rapid Fold Recognition)" == field.label or "MEMPACK" in field.label or "Metsite" in field.label or "HSPred" in field.label or "MEMEMBED" in field.label or "Generate TDB" in field.label or 'Protein Sequence' in field.label or 'DMPfold' in field.label or 'DeepMetaPSICOV' in label %}
    {% else %}
    <div class="form-group">
      {% bootstrap_field field %}
    </div>
      {% endif %}
{% endfor %}

{% templatetag openvariable %}/if{% templatetag closevariable %}

{% if suspend %}
    <h2 style="color: red;">{{ suspend_message }}</h2>
{% else %}

    {% buttons %}
         <input class="btn btn-danger" type="reset" value="Reset" />
         <input value="Submit" type="submit" class="btn btn-primary" />
    {% endbuttons %}
{% endif %}
</form>
